var Remote={transmitter_instance:!1,receiver_instance:!1,signals:[],mapping:{},reverse_mapping:{},frequencies:[9650,9450,9240,9010,8800,8590,8370,8170,7950,7730,7510,7300,7070]};Remote.receiver=function(e){if(Remote.receiver_instance)return Remote.receiver_instance;if(e){if(Remote.signals=e,!(e.length<=Object.keys(Remote.frequencies).length))throw new Error("Number of signals should be less than or equal to "+Remote.frequencies.length);e.forEach(function(e,n){Remote.mapping[e]=Remote.frequencies[n],Remote.reverse_mapping[Remote.frequencies[n]]=e});var n={on:function(e,n){if(!(Remote.signals.indexOf(e)>-1))throw new Error('Signal "'+e+'" not found');this.handlers[e]=n},offset:448,minDecibels:-55,fftSize:2048,highpassValue:5e3,minPercentage:.75,handlers:{},init:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({audio:!0},function(e){window.contextClass=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),contextClass?Remote.receiver_instance.listen(e):alert("Web Audio API not available")},function(e){alert(e)})},listen:function t(e){function t(){var e=new Uint8Array(a.frequencyBinCount);a.getByteFrequencyData(e);for(var i=0;i<a.frequencyBinCount;i++){var o=e[i],r=o/256;if(r>n.minPercentage){var s=Math.round((n.offset-i)/10),m=Remote.signals[s];if(c!==s&&m in Remote.mapping)if(Remote.signals.indexOf(m)>-1){var u={name:m,time:Date.now()};Remote.receiver_instance.handlers[m](!1,u)}else Remote.receiver_instance.handlers[m](m+": not found");c=s}}window.requestAnimationFrame(t)}var n=this,i=new contextClass,o=i.createMediaStreamSource(e),r=i.createBiquadFilter();r.type=r.HIGHPASS,r.frequency.value=n.highpassValue,o.connect(r);var a=i.createAnalyser();a.minDecibels=n.minDecibels,a.fftSize=n.fftSize,r.connect(a);var s=i.createScriptProcessor(2048,1,1);a.connect(s),s.connect(i.destination);var c=!1;t()}};return n.init(),Remote.receiver_instance=n,n}throw new Error("Signal array not found")};